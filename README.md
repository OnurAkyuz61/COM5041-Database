# COM5041 - Database Design and Development

**Ã–ÄŸrenci**: Onur AkyÃ¼z  
**Ã–ÄŸrenci No**: 2200005590  
**Ãœniversite**: Ä°stanbul KÃ¼ltÃ¼r Ãœniversitesi  
**Akademik YÄ±l**: 2025-2026

## ðŸ“‹ Ders HakkÄ±nda

Bu repository, COM5041 Database Design and Development dersi kapsamÄ±nda yapÄ±lan laboratuvar Ã§alÄ±ÅŸmalarÄ±, Ã¶devler ve projelerini iÃ§ermektedir. Ders boyunca SQL Server, veritabanÄ± tasarÄ±mÄ±, SQL sorgularÄ±, stored procedure'ler ve veritabanÄ± gÃ¼venliÄŸi konularÄ±nda pratik uygulamalar gerÃ§ekleÅŸtirilmiÅŸtir.

## ðŸ“ Proje YapÄ±sÄ±

```
COM5041-Database/
â”œâ”€â”€ README.md                                    # Bu dosya
â”œâ”€â”€ Lab01 - SQL Server Installation/             # SQL Server kurulum ve yapÄ±landÄ±rma
â”œâ”€â”€ Lab02 - Assignment/                          # Ä°kinci hafta laboratuvar Ã¶devi
â”œâ”€â”€ Lab03 - Assignment/                          # ÃœÃ§Ã¼ncÃ¼ hafta laboratuvar Ã¶devi
â”œâ”€â”€ Lab04 - Assignment/                          # DÃ¶rdÃ¼ncÃ¼ hafta laboratuvar Ã¶devi
â”‚   â”œâ”€â”€ LAB04_Assignment.pdf                    # Ã–dev talimatlarÄ±
â”‚   â”œâ”€â”€ procedure1.sql                          # Rol oluÅŸturma ve yetki verme
â”‚   â”œâ”€â”€ procedure2.sql                          # Login ve kullanÄ±cÄ± yÃ¶netimi
â”‚   â””â”€â”€ procedure3.sql                          # Temizleme iÅŸlemleri
â”œâ”€â”€ Lab05/                                       # BeÅŸinci hafta laboratuvar Ã§alÄ±ÅŸmalarÄ±
â”‚   â”œâ”€â”€ LAB05_Basic SQL _Manual_ _1_.pdf        # Lab manual
â”‚   â”œâ”€â”€ PROCEDURE 1 - SQL Data Definition and Data Types/
â”‚   â”‚   â””â”€â”€ procedure1_solution.sql             # VeritabanÄ± ve tablo oluÅŸturma
â”‚   â”œâ”€â”€ PROCEDURE 2 - Adding constraints to a table/
â”‚   â”‚   â””â”€â”€ procedure2_solution.sql             # Constraint'ler ve kÄ±sÄ±tlamalar
â”‚   â”œâ”€â”€ PROCEDURE 3- INSERT, DELETE, and UPDATE Statements in SQL/
â”‚   â”‚   â””â”€â”€ procedure3_solution.sql             # Veri manipÃ¼lasyonu
â”‚   â”œâ”€â”€ PROCEDURE 4 - Basic Retrieval Queries in SQL/
â”‚   â”‚   â””â”€â”€ procedure4_solution.sql             # SELECT sorgularÄ±
â”‚   â”œâ”€â”€ PROCEDURE 5 - ASSIGNMENT/
â”‚   â”‚   â”œâ”€â”€ 2200005590_assignment_procedure1.sql # Assignment A - Schema oluÅŸturma
â”‚   â”‚   â””â”€â”€ 2200005590_assignment_procedure2.sql # Assignment A - Veri iÅŸlemleri
â”‚   â”œâ”€â”€ PROCEDURE 6 - ASSIGNMENT B/
â”‚   â”‚   â”œâ”€â”€ 2200005590_assignment_b_procedure1.sql # Assignment B - Schema
â”‚   â”‚   â””â”€â”€ 2200005590_assignment_b_procedure2.sql # Assignment B - Veri iÅŸlemleri
â”‚   â”œâ”€â”€ PROCEDURE 7 - ASSIGNMENT C/
â”‚   â”‚   â”œâ”€â”€ 2200005590_assignment_c_procedure1.sql # Assignment C - Schema
â”‚   â”‚   â””â”€â”€ 2200005590_assignment_c_procedure2.sql # Assignment C - Veri iÅŸlemleri
â”‚   â””â”€â”€ PROCEDURE 8 - ASSIGNMENT D/
â”‚       â”œâ”€â”€ 2200005590_assignment_d_procedure1.sql # Assignment D - Schema
â”‚       â””â”€â”€ 2200005590_assignment_d_procedure2.sql # Assignment D - Veri iÅŸlemleri
â”œâ”€â”€ Lab06/                                       # AltÄ±ncÄ± hafta laboratuvar Ã§alÄ±ÅŸmalarÄ±
â”‚   â”œâ”€â”€ LAB06_Advanced SQL _Manual.pdf          # Lab manual
â”‚   â”œâ”€â”€ AdventureWorks2019.bak                  # Ã–rnek veritabanÄ± backup dosyasÄ±
â”‚   â”œâ”€â”€ PROCEDURE 1 - Using the JOIN operator to return data from multiple tables/
â”‚   â”‚   â””â”€â”€ Procedure1_JOIN_Solutions.sql       # JOIN iÅŸlemleri (INNER, LEFT, RIGHT)
â”‚   â”œâ”€â”€ PROCEDURE 2 - Perform aggregating, grouping, and windowing/
â”‚   â”‚   â””â”€â”€ Procedure2_Aggregation_Solutions.sql # Aggregation ve GROUP BY
â”‚   â”œâ”€â”€ PROCEDURE 3 - Nested Queries in SQL/
â”‚   â”‚   â””â”€â”€ Procedure3_NestedQueries_Solutions.sql # Subquery ve nested queries
â”‚   â”œâ”€â”€ PROCEDURE 4 - Limiting the data returned in your result set/
â”‚   â”‚   â””â”€â”€ Procedure4_LimitingData_Solutions.sql # TOP, DISTINCT, UNION
â”‚   â””â”€â”€ PROCEDURE 5 - ASSIGNMENT/               # Assignment dosyalarÄ± (32 items)
â”œâ”€â”€ Lab07/                                       # Yedinci hafta laboratuvar Ã§alÄ±ÅŸmalarÄ±
â”‚   â”œâ”€â”€ LAB07_ Introduction to Views and, the code scripts in SQL _Manual_.pdf # Lab manual
â”‚   â”œâ”€â”€ PROCEDURE 1 - How to create a view in SQL/
â”‚   â”‚   â””â”€â”€ create_view_examples.sql            # View oluÅŸturma Ã¶rnekleri
â”‚   â”œâ”€â”€ PROCEDURE 2 - How to update a view in SQL/
â”‚   â”‚   â””â”€â”€ update_view_examples.sql            # View gÃ¼ncelleme Ã¶rnekleri
â”‚   â”œâ”€â”€ PROCEDURE 3 - How to insert or delete rows through a view in SQL/
â”‚   â”‚   â””â”€â”€ insert_delete_view_examples.sql     # View Ã¼zerinden veri iÅŸlemleri
â”‚   â”œâ”€â”€ PROCEDURE 4 - How to modify or delete a view in SQL/
â”‚   â”‚   â””â”€â”€ modify_delete_view_examples.sql     # View deÄŸiÅŸtirme ve silme
â”‚   â”œâ”€â”€ PROCEDURE 5 - How to use the View Designer in SQL/ # View Designer kullanÄ±mÄ±
â”‚   â”œâ”€â”€ PROCEDURE 6 - How to code scripts in SQL/
â”‚   â”‚   â”œâ”€â”€ 01_database_creation_script.sql     # VeritabanÄ± oluÅŸturma script'i
â”‚   â”‚   â”œâ”€â”€ 02_variables_and_calculations.sql   # DeÄŸiÅŸkenler ve hesaplamalar
â”‚   â”‚   â”œâ”€â”€ 03_table_variables.sql              # Tablo deÄŸiÅŸkenleri
â”‚   â”‚   â”œâ”€â”€ 04_temporary_tables.sql             # GeÃ§ici tablolar
â”‚   â”‚   â””â”€â”€ 05_derived_tables.sql               # TÃ¼retilmiÅŸ tablolar
â”‚   â”œâ”€â”€ PROCEDURE 7 - How to control the execution of a script/
â”‚   â”‚   â”œâ”€â”€ 01_if_else_control_flow.sql         # IF-ELSE kontrol yapÄ±larÄ±
â”‚   â”‚   â””â”€â”€ 02_while_loop_example.sql           # WHILE dÃ¶ngÃ¼ Ã¶rnekleri
â”‚   â””â”€â”€ PROCEDURE 8 - How to handle errors in SQL/
â”‚       â””â”€â”€ error_handling_examples.sql         # Hata yÃ¶netimi Ã¶rnekleri
â”œâ”€â”€ Lab08/                                       # Sekizinci hafta laboratuvar Ã§alÄ±ÅŸmalarÄ±
â”‚   â”œâ”€â”€ LAB08_ Data manipulation triggers and Stored procedures _Manual and Exercise_.pdf # Lab manual
â”‚   â”œâ”€â”€ PROCEDURE 1 â€“ How to create triggers/
â”‚   â”‚   â””â”€â”€ create_trigger_example.sql          # Trigger oluÅŸturma Ã¶rnekleri
â”‚   â”œâ”€â”€ PROCEDURE 2 â€“ How to alter triggers/
â”‚   â”‚   â””â”€â”€ alter_trigger_example.sql           # Trigger deÄŸiÅŸtirme Ã¶rnekleri
â”‚   â”œâ”€â”€ PROCEDURE 3 â€“ How to enable, disable or drop triggers/
â”‚   â”‚   â””â”€â”€ enable_disable_drop_triggers.sql    # Trigger yÃ¶netimi
â”‚   â”œâ”€â”€ PROCEDURE 4 â€“ Working with stored procedures/
â”‚   â”‚   â””â”€â”€ stored_procedures_example.sql       # Stored procedure Ã¶rnekleri
â”‚   â”œâ”€â”€ PROCEDURE 5 â€“ How to alter stored procedures/
â”‚   â”‚   â””â”€â”€ alter_stored_procedures_example.sql # Stored procedure deÄŸiÅŸtirme
â”‚   â””â”€â”€ PROCEDURE 6 â€“ How to drop stored procedures/
â”‚       â””â”€â”€ drop_stored_procedures_example.sql  # Stored procedure silme
â”œâ”€â”€ Lab09/                                       # Dokuzuncu hafta laboratuvar Ã§alÄ±ÅŸmalarÄ±
â”‚   â”œâ”€â”€ LAB09_ How to Manage Transactions _Manual and Exercise_ _2.pdf # Lab manual
â”‚   â”œâ”€â”€ PROCEDURE 1 â€“ How to manage transactions/
â”‚   â”‚   â”œâ”€â”€ Step1_Create_Database_and_Table.sql # VeritabanÄ± ve tablo oluÅŸturma
â”‚   â”‚   â”œâ”€â”€ Step2_BEGIN_and_COMMIT_TRANSACTION.sql # BEGIN ve COMMIT transaction
â”‚   â”‚   â”œâ”€â”€ Step3_ROLLBACK_TRANSACTION.sql      # ROLLBACK transaction
â”‚   â”‚   â”œâ”€â”€ Step4_SAVEPOINTS.sql                # SAVEPOINT kullanÄ±mÄ±
â”‚   â”‚   â””â”€â”€ Step5_AUTO_ROLLBACK_TRANSACTION.sql # Otomatik rollback iÅŸlemleri
â”‚   â””â”€â”€ PROCEDURE 2 - Bank ATM Transaction Creation Example/
â”‚       â”œâ”€â”€ Step1_Create_Accounts_Table.sql     # Hesaplar tablosu oluÅŸturma
â”‚       â”œâ”€â”€ Step2_Create_MoneyTransfer_Procedure.sql # Para transferi stored procedure
â”‚       â”œâ”€â”€ Step3_Transfer_Successful.sql      # BaÅŸarÄ±lÄ± transfer Ã¶rneÄŸi
â”‚       â””â”€â”€ Step4_Transfer_Failed.sql           # BaÅŸarÄ±sÄ±z transfer Ã¶rneÄŸi
â”œâ”€â”€ Lab10/                                       # Onuncu hafta laboratuvar Ã§alÄ±ÅŸmalarÄ±
â”‚   â”œâ”€â”€ LAB10_ Working with user-defined functions and XML _Manual and Exercise_.pdf # Lab manual
â”‚   â”œâ”€â”€ PROCEDURE 1 â€“ How to code user-defined functions/
â”‚   â”‚   â”œâ”€â”€ Step1_CreateFunction.sql            # Scalar function oluÅŸturma
â”‚   â”‚   â”œâ”€â”€ Step2_QueryWithFunction.sql         # Function ile sorgulama
â”‚   â”‚   â”œâ”€â”€ Step3_CallWithConstant.sql          # Sabit deÄŸer ile function Ã§aÄŸÄ±rma
â”‚   â”‚   â”œâ”€â”€ Step4_FunctionWithTwoParameters.sql # Ä°ki parametreli function
â”‚   â”‚   â”œâ”€â”€ Step4_TestDefaultParameter.sql       # VarsayÄ±lan parametre testi
â”‚   â”‚   â”œâ”€â”€ Step4_TestTwoParameters.sql          # Ä°ki parametre testi
â”‚   â”‚   â”œâ”€â”€ Step5_ExecuteKeyword.sql             # EXECUTE keyword kullanÄ±mÄ±
â”‚   â”‚   â”œâ”€â”€ Step6_InlineTableValuedFunction.sql  # Inline table-valued function
â”‚   â”‚   â””â”€â”€ Step6_TestTableValuedFunction.sql    # Table-valued function testi
â”‚   â””â”€â”€ PROCEDURE 2 â€“ How to work with XML/
â”‚       â”œâ”€â”€ Step1_CreateDatabaseAndTable.sql     # Showroom veritabanÄ± ve Car tablosu
â”‚       â”œâ”€â”€ Step2_FOR_XML_AUTO.sql               # FOR XML AUTO kullanÄ±mÄ±
â”‚       â”œâ”€â”€ Step3_FOR_XML_PATH.sql               # FOR XML PATH kullanÄ±mÄ±
â”‚       â”œâ”€â”€ Step4_FOR_XML_PATH_WithElementName.sql # Element isimleri ile XML
â”‚       â”œâ”€â”€ Step5_FOR_XML_PATH_WithRoot.sql      # Root element ile XML
â”‚       â”œâ”€â”€ Step6_FOR_XML_PATH_WithNestedElements.sql # Ä°Ã§ iÃ§e XML elementleri
â”‚       â””â”€â”€ Step7_FOR_XML_PATH_WithAttributes.sql # XML attribute'larÄ±
â”œâ”€â”€ Lab10 - Assignment/                          # Lab10 Assignment
â”‚   â”œâ”€â”€ LAB10.pdf                                # Assignment talimatlarÄ±
â”‚   â”œâ”€â”€ 2200005590 - PROCEDURE 1.sql            # Assignment Procedure 1
â”‚   â””â”€â”€ 2200005590 - PROCEDURE 2.sql            # Assignment Procedure 2
â””â”€â”€ Quiz01/                                      # Quiz 01 - Temel VeritabanÄ± KavramlarÄ±
    â”œâ”€â”€ quiz01_questions.pdf                     # Quiz sorularÄ±
    â””â”€â”€ quiz01_answers.sql                       # Quiz cevaplarÄ±
```

## ðŸŽ¯ Ã–ÄŸrenme Hedefleri

### Temel Konular
- **VeritabanÄ± TasarÄ±mÄ±**: ER diyagramlarÄ±, normalizasyon
- **SQL Temelleri**: SELECT, INSERT, UPDATE, DELETE iÅŸlemleri
- **Veri Modelleme**: Ä°liÅŸkisel veritabanÄ± kavramlarÄ±
- **SQL Server**: Kurulum, yapÄ±landÄ±rma ve yÃ¶netim

### Ä°leri DÃ¼zey Konular
- **Stored Procedures**: SaklÄ± yordam yazÄ±mÄ± ve kullanÄ±mÄ±
- **GÃ¼venlik YÃ¶netimi**: KullanÄ±cÄ± rolleri, yetkiler ve eriÅŸim kontrolÃ¼
- **Performans Optimizasyonu**: Ä°ndeksleme ve sorgu optimizasyonu
- **VeritabanÄ± YÃ¶netimi**: Backup, restore ve maintenance iÅŸlemleri

## ðŸ“š Laboratuvar Ã‡alÄ±ÅŸmalarÄ±

### Lab01 - SQL Server Kurulumu
- SQL Server Management Studio (SSMS) kurulumu
- VeritabanÄ± sunucusu yapÄ±landÄ±rmasÄ±
- Ä°lk baÄŸlantÄ± ve temel ayarlar

### Lab02 - Temel SQL Ä°ÅŸlemleri
- **Kapsam**: Temel SQL sorgularÄ± ve veri manipÃ¼lasyonu
- **Dosyalar**: 
  - `Database Assignment 2 - 2200005590 Onur Akyuz.pdf` - TamamlanmÄ±ÅŸ Ã¶dev
  - `LAB02 - ASSIGNMENT - B.pdf` - Ã–dev talimatlarÄ±

### Lab03 - Veri Analizi ve Raporlama
- **Kapsam**: KarmaÅŸÄ±k sorgular ve veri analizi
- **Dosyalar**:
  - `2200005590 - Onur AkyÃ¼z.png` - SonuÃ§ ekran gÃ¶rÃ¼ntÃ¼sÃ¼
  - `LAB ASSIGNMENT_WEEK3.pdf` - Ã–dev talimatlarÄ±

### Lab04 - GÃ¼venlik ve KullanÄ±cÄ± YÃ¶netimi
- **Kapsam**: VeritabanÄ± gÃ¼venliÄŸi, roller ve yetkiler
- **Dosyalar**:
  - `procedure1.sql` - Rol oluÅŸturma ve yetki atama
  - `procedure2.sql` - Login ve kullanÄ±cÄ± oluÅŸturma
  - `procedure3.sql` - Temizleme ve silme iÅŸlemleri

### Lab05 - Temel SQL ve VeritabanÄ± TasarÄ±mÄ±
- **Kapsam**: SQL DDL, DML komutlarÄ± ve veritabanÄ± yapÄ±sÄ±
- **Procedure 1**: VeritabanÄ± ve tablo oluÅŸturma (CREATE DATABASE, CREATE TABLE)
- **Procedure 2**: Constraint'ler (PRIMARY KEY, FOREIGN KEY, UNIQUE, DEFAULT)
- **Procedure 3**: Veri manipÃ¼lasyonu (INSERT, UPDATE, DELETE)
- **Procedure 4**: Veri sorgulama (SELECT, JOIN, UNION, ORDER BY)
- **Assignment A**: Thom Yorke & PJ Harvey mÃ¼zik veritabanÄ±
- **Assignment B**: David Bowie & Brian Molko mÃ¼zik veritabanÄ±
- **Assignment C**: Harun Tekin & Teoman mÃ¼zik veritabanÄ±
- **Assignment D**: Tarja Turunen & Floor Jansen mÃ¼zik veritabanÄ±

### Lab06 - Ä°leri SQL Teknikleri
- **Kapsam**: JOIN iÅŸlemleri, aggregation, subqueries ve veri filtreleme
- **VeritabanÄ±**: AdventureWorks2019
- **Procedure 1**: JOIN operatÃ¶rleri (INNER JOIN, LEFT OUTER JOIN, RIGHT OUTER JOIN)
- **Procedure 2**: Aggregation ve gruplama (SUM, AVG, COUNT, GROUP BY, HAVING)
- **Procedure 3**: Nested queries ve subqueries (WHERE subqueries, IN operatÃ¶rÃ¼)
- **Procedure 4**: Veri sÄ±nÄ±rlama (TOP, DISTINCT, UNION, NULL filtreleme)
- **Assignment**: Northwind veritabanÄ± ile pratik uygulamalar

### Lab07 - Views ve SQL Script Programlama
- **Kapsam**: SQL View'larÄ±, script programlama, kontrol yapÄ±larÄ± ve hata yÃ¶netimi
- **Procedure 1**: View oluÅŸturma (CREATE VIEW, SELECT statement'larÄ±)
- **Procedure 2**: View gÃ¼ncelleme (ALTER VIEW, view modifikasyonu)
- **Procedure 3**: View Ã¼zerinden veri iÅŸlemleri (INSERT, DELETE through views)
- **Procedure 4**: View yÃ¶netimi (DROP VIEW, view silme ve deÄŸiÅŸtirme)
- **Procedure 5**: View Designer kullanÄ±mÄ± (SSMS grafik araÃ§larÄ±)
- **Procedure 6**: SQL Script programlama (variables, table variables, temporary tables)
- **Procedure 7**: Script kontrol yapÄ±larÄ± (IF-ELSE, WHILE loops)
- **Procedure 8**: Hata yÃ¶netimi (TRY-CATCH, error handling)

### Lab08 - Triggers ve Stored Procedures
- **Kapsam**: Veri manipÃ¼lasyon trigger'larÄ± ve saklÄ± yordamlar (stored procedures)
- **Procedure 1**: Trigger oluÅŸturma (CREATE TRIGGER, INSERT/UPDATE/DELETE triggers)
- **Procedure 2**: Trigger deÄŸiÅŸtirme (ALTER TRIGGER, trigger modifikasyonu)
- **Procedure 3**: Trigger yÃ¶netimi (ENABLE/DISABLE/DROP TRIGGER)
- **Procedure 4**: Stored procedure Ã§alÄ±ÅŸmalarÄ± (CREATE PROCEDURE, parametre kullanÄ±mÄ±)
- **Procedure 5**: Stored procedure deÄŸiÅŸtirme (ALTER PROCEDURE)
- **Procedure 6**: Stored procedure silme (DROP PROCEDURE)

### Lab09 - Transaction YÃ¶netimi
- **Kapsam**: Transaction yÃ¶netimi, ACID Ã¶zellikleri ve veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼
- **Procedure 1**: Transaction yÃ¶netimi temelleri
  - **Step 1**: VeritabanÄ± ve tablo oluÅŸturma (LAB09 veritabanÄ±, Person tablosu)
  - **Step 2**: BEGIN TRANSACTION ve COMMIT TRANSACTION kullanÄ±mÄ±
  - **Step 3**: ROLLBACK TRANSACTION ile iÅŸlem geri alma
  - **Step 4**: SAVEPOINT ile kÄ±smi geri alma iÅŸlemleri
  - **Step 5**: Otomatik rollback ve hata yÃ¶netimi
- **Procedure 2**: Bank ATM Transaction Ã–rneÄŸi
  - **Step 1**: Accounts tablosu oluÅŸturma (AccountID, FirstName, LastName, Branch, Balance)
  - **Step 2**: Para transferi stored procedure oluÅŸturma (MoneyTransfer)
  - **Step 3**: BaÅŸarÄ±lÄ± para transferi senaryosu
  - **Step 4**: BaÅŸarÄ±sÄ±z transfer ve rollback senaryosu

### Lab10 - User-Defined Functions ve XML
- **Kapsam**: KullanÄ±cÄ± tanÄ±mlÄ± fonksiyonlar ve XML veri iÅŸleme
- **Procedure 1**: User-Defined Functions (KullanÄ±cÄ± TanÄ±mlÄ± Fonksiyonlar)
  - **Step 1**: Scalar function oluÅŸturma (CREATE FUNCTION, RETURNS int)
  - **Step 2**: Function ile sorgulama (SELECT ile function kullanÄ±mÄ±)
  - **Step 3**: Sabit deÄŸer ile function Ã§aÄŸÄ±rma
  - **Step 4**: Ä°ki parametreli function ve varsayÄ±lan parametre kullanÄ±mÄ±
  - **Step 5**: EXECUTE keyword ile function Ã§aÄŸÄ±rma
  - **Step 6**: Inline table-valued function oluÅŸturma ve kullanÄ±mÄ±
- **Procedure 2**: XML Ä°ÅŸlemleri
  - **Step 1**: Showroom veritabanÄ± ve Car tablosu oluÅŸturma
  - **Step 2**: FOR XML AUTO ile XML formatÄ±nda veri dÃ¶ndÃ¼rme
  - **Step 3**: FOR XML PATH ile Ã¶zelleÅŸtirilmiÅŸ XML yapÄ±sÄ±
  - **Step 4**: Element isimleri ile XML oluÅŸturma
  - **Step 5**: Root element ekleme
  - **Step 6**: Ä°Ã§ iÃ§e (nested) XML elementleri oluÅŸturma
  - **Step 7**: XML attribute'larÄ± ekleme
- **Assignment**: Lab10 - Assignment
  - **Dosyalar**:
    - `LAB10.pdf` - Assignment talimatlarÄ±
    - `2200005590 - PROCEDURE 1.sql` - Assignment Procedure 1 Ã§Ã¶zÃ¼mÃ¼
    - `2200005590 - PROCEDURE 2.sql` - Assignment Procedure 2 Ã§Ã¶zÃ¼mÃ¼

## ðŸ“ Quiz Ã‡alÄ±ÅŸmalarÄ±

### Quiz 01 - Temel VeritabanÄ± KavramlarÄ±
- **Kapsam**: VeritabanÄ± temel kavramlarÄ±, SQL Server temelleri
- **Konular**:
  - VeritabanÄ± yÃ¶netim sistemleri (DBMS)
  - Ä°liÅŸkisel veritabanÄ± modeli
  - SQL Server mimarisi
  - Temel SQL komutlarÄ±
  - Veri tÃ¼rleri ve constraint'ler
- **Tarih**: Hafta 7
- **Durum**: TamamlandÄ± âœ…

## ðŸ”§ Teknik Detaylar

### Lab04 - GÃ¼venlik YÃ¶netimi DetaylarÄ±

#### Procedure 1: Rol OluÅŸturma ve Yetki Verme
```sql
CREATE ROLE USER_D;
GRANT ALTER, INSERT ON Sales.OrderLines TO USER_D;
GRANT UPDATE, INSERT ON Purchasing.SupplierCategories TO USER_D;
GRANT SELECT ON Application.StateProvinces TO USER_D;
```

#### Procedure 2: Login ve KullanÄ±cÄ± YÃ¶netimi
- GÃ¼venli login oluÅŸturma (`Login_D`)
- VeritabanÄ± kullanÄ±cÄ±sÄ± oluÅŸturma
- Rol Ã¼yeliÄŸi atama
- Mevcut kayÄ±tlarÄ± kontrol etme

#### Procedure 3: Temizleme Ä°ÅŸlemleri
- Yetkileri geri alma (REVOKE)
- Rol Ã¼yeliÄŸini kaldÄ±rma
- KullanÄ±cÄ± ve login silme

### Lab05 - Temel SQL DetaylarÄ±

#### Procedure 1: VeritabanÄ± ve Tablo OluÅŸturma
```sql
CREATE DATABASE TheFirstDatabase;
CREATE TABLE Employee (
    EmployeeID int NOT NULL IDENTITY(1,1),
    FirstName varchar(50) NOT NULL,
    LastName varchar(50) NOT NULL
);
```

#### Procedure 2: Constraint Ekleme
- Primary Key, Foreign Key, Unique, Default constraint'leri
- Referential integrity (veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼) saÄŸlama
- Services ve Services_by_Employees junction tablosu

#### Assignment A-D: MÃ¼zik Åžirketi VeritabanlarÄ±
- **Assignment A**: Thom Yorke & PJ Harvey (MusicCompanyDB)
- **Assignment B**: David Bowie & Brian Molko (MusicCompanyDB_B)
- **Assignment C**: Harun Tekin & Teoman (MusicCompanyDB_C)
- **Assignment D**: Tarja Turunen & Floor Jansen (MusicCompanyDB_D)
- Musicians, Instruments, Plays tablolarÄ± (Many-to-Many iliÅŸki)
- Referential integrity constraint testleri

### Lab06 - Ä°leri SQL Teknikleri DetaylarÄ±

#### Procedure 1: JOIN Ä°ÅŸlemleri
```sql
-- INNER JOIN: Sadece eÅŸleÅŸen kayÄ±tlar
SELECT p.ProductID, p.Name, sd.OrderQty, sd.UnitPrice
FROM Production.Product AS p
INNER JOIN Sales.SalesOrderDetail sd ON p.ProductID = sd.ProductID;

-- LEFT OUTER JOIN: Sol tablodaki tÃ¼m kayÄ±tlar
SELECT p.ProductID, sd.ProductID, p.Name, sd.OrderQty, sd.UnitPrice
FROM Production.Product AS p
LEFT OUTER JOIN Sales.SalesOrderDetail sd ON p.ProductID = sd.ProductID;
```

#### Procedure 2: Aggregation ve Gruplama
```sql
-- SUM, AVG, COUNT fonksiyonlarÄ±
SELECT SUM(poh.TotalDue) AS [Total Due],
       AVG(poh.TotalDue) AS [Average Total Due],
       COUNT(poh.EmployeeID) [Number Of Employees]
FROM Purchasing.PurchaseOrderHeader poh;

-- GROUP BY ile gruplama
SELECT sm.Name AS ShippingMethod,
       SUM(poh.TotalDue) AS [Total Due]
FROM Purchasing.PurchaseOrderHeader poh
INNER JOIN Purchasing.ShipMethod sm ON poh.ShipMethodID = sm.ShipMethodID
GROUP BY sm.Name;
```

#### Procedure 3: Nested Queries
```sql
-- Subquery ile ortalamadan fazla vacation hours
SELECT BusinessEntityID, LoginID, JobTitle, VacationHours
FROM HumanResources.Employee E1
WHERE VacationHours > (SELECT AVG(VacationHours) 
                       FROM HumanResources.Employee E2);
```

#### Procedure 4: Veri SÄ±nÄ±rlama
```sql
-- TOP ile sÄ±nÄ±rlama
SELECT TOP(5) SalesOrderID, OrderDate, TotalDue
FROM Sales.SalesOrderHeader
ORDER BY TotalDue DESC;

-- DISTINCT ile tekrar eden deÄŸerleri kaldÄ±rma
SELECT DISTINCT p.Name AS ProductName
FROM Production.Product AS p
INNER JOIN Sales.SalesOrderDetail sd ON p.ProductID = sd.ProductID;
```

### Lab07 - Views ve SQL Script Programlama DetaylarÄ±

#### Procedure 1: View OluÅŸturma
```sql
-- Basit view oluÅŸturma
CREATE VIEW VProductSpecialList
AS
SELECT p.ProductID AS [ProductIdNumber],
       p.Name AS [ProductName],
       p.ProductNumber AS [ProductMainNumber]
FROM [Production].[Product] as p
WHERE ProductID > 900;

-- View'dan veri sorgulama
SELECT * FROM VProductSpecialList;
```

#### Procedure 6: SQL Script Programlama
```sql
-- DeÄŸiÅŸken tanÄ±mlama ve hesaplama
DECLARE @TotalPrice money;
SET @TotalPrice = (SELECT SUM(pod.OrderQty * UnitPrice) 
                   FROM Purchasing.PurchaseOrderDetail pod);

-- KoÅŸullu iÅŸlem
IF @TotalPrice > 0
    PRINT 'Total price = $' + CONVERT(varchar, @TotalPrice, 1)
ELSE
    PRINT 'There is not order';
```

#### Procedure 7: Kontrol YapÄ±larÄ±
```sql
-- IF-ELSE kontrol yapÄ±sÄ±
IF (SELECT COUNT(*) FROM Production.Product 
    WHERE Name LIKE 'Touring-3000%') > 5
    PRINT 'There are more than 5 Touring-3000 bicycles.'
ELSE
    PRINT 'There are 5 or less Touring-3000 bicycles.';
```

#### Lab07 KapsamÄ±ndaki Konular
- **Views**: CREATE VIEW, ALTER VIEW, DROP VIEW
- **View Operations**: SELECT, INSERT, UPDATE, DELETE through views
- **Variables**: DECLARE, SET, scalar variables
- **Table Variables**: DECLARE @table_var TABLE
- **Temporary Tables**: CREATE TABLE #temp_table
- **Control Flow**: IF-ELSE, WHILE loops
- **Error Handling**: TRY-CATCH blocks

### Lab08 - Triggers ve Stored Procedures DetaylarÄ±

#### Procedure 1: Trigger OluÅŸturma
```sql
-- INSERT trigger Ã¶rneÄŸi
CREATE TRIGGER HumanResources.iCheckModifiedDate
ON HumanResources.Department
FOR INSERT
AS
BEGIN
    DECLARE @modifieddate datetime, @DepartmentID int
    SELECT @modifieddate = modifieddate, @DepartmentID = departmentid FROM inserted;
    
    IF(DATEDIFF(Day, @modifieddate, getdate()) > 0)
    BEGIN
        UPDATE HumanResources.Department
        SET ModifiedDate = GETDATE()
        WHERE DepartmentID = @DepartmentID
    END
END
```

#### Procedure 4: Stored Procedure OluÅŸturma
```sql
-- Basit stored procedure
CREATE PROCEDURE sp_PurchaseOrderInformation
AS
BEGIN
    SELECT poh.PurchaseOrderID, pod.PurchaseOrderDetailID,
           poh.OrderDate, poh.TotalDue, pod.ReceivedQty, p.Name ProductName
    FROM Purchasing.PurchaseOrderHeader poh
    INNER JOIN Purchasing.PurchaseOrderDetail pod
    ON poh.PurchaseOrderID = pod.PurchaseOrderID
    INNER JOIN Production.Product p
    ON pod.ProductID = p.ProductID
END

-- OUTPUT parametreli procedure
CREATE PROC dbo.SampleOutput
@Parameter2 int OUTPUT
AS
SELECT @Parameter2 = 10
```

#### Lab08 KapsamÄ±ndaki Konular
- **Triggers**: CREATE TRIGGER, ALTER TRIGGER, DROP TRIGGER
- **Trigger Types**: INSERT, UPDATE, DELETE triggers
- **Trigger Management**: ENABLE/DISABLE TRIGGER
- **Stored Procedures**: CREATE PROCEDURE, ALTER PROCEDURE, DROP PROCEDURE
- **Parameters**: INPUT/OUTPUT parameters, EXEC with parameters
- **Result Sets**: WITH RESULT SETS clause

### Lab09 - Transaction YÃ¶netimi DetaylarÄ±

#### Procedure 1: Transaction YÃ¶netimi Temelleri
```sql
-- BEGIN TRANSACTION ve COMMIT
BEGIN TRANSACTION;
INSERT INTO Person VALUES ('Smith', 'John', '123 Main St', 'Istanbul', 30);
COMMIT TRANSACTION;

-- ROLLBACK TRANSACTION
BEGIN TRANSACTION;
UPDATE Person SET Age = 25 WHERE PersonID = 1;
ROLLBACK TRANSACTION; -- DeÄŸiÅŸiklik geri alÄ±nÄ±r

-- SAVEPOINT kullanÄ±mÄ±
BEGIN TRANSACTION;
SAVE TRANSACTION SavePoint1;
INSERT INTO Person VALUES ('Doe', 'Jane', '456 Oak Ave', 'Ankara', 28);
ROLLBACK TRANSACTION SavePoint1; -- Sadece bu noktaya kadar geri alÄ±nÄ±r
COMMIT TRANSACTION;
```

#### Procedure 2: Bank ATM Transaction Ã–rneÄŸi
```sql
-- Para transferi stored procedure
CREATE PROCEDURE MoneyTransfer
    @FromAccount CHAR(10),
    @ToAccount CHAR(10),
    @Amount MONEY
AS
BEGIN
    BEGIN TRANSACTION;
    
    -- GÃ¶nderen hesaptan para Ã§ekme
    UPDATE Accounts 
    SET Balance = Balance - @Amount 
    WHERE AccountID = @FromAccount;
    
    -- AlÄ±cÄ± hesaba para yatÄ±rma
    UPDATE Accounts 
    SET Balance = Balance + @Amount 
    WHERE AccountID = @ToAccount;
    
    -- Bakiye kontrolÃ¼
    IF (SELECT Balance FROM Accounts WHERE AccountID = @FromAccount) < 0
    BEGIN
        ROLLBACK TRANSACTION;
        PRINT 'Insufficient balance. Transaction rolled back.';
    END
    ELSE
    BEGIN
        COMMIT TRANSACTION;
        PRINT 'Transaction completed successfully.';
    END
END
```

#### Lab09 KapsamÄ±ndaki Konular
- **Transactions**: BEGIN TRANSACTION, COMMIT TRANSACTION, ROLLBACK TRANSACTION
- **ACID Properties**: Atomicity, Consistency, Isolation, Durability
- **Savepoints**: SAVEPOINT, ROLLBACK TO SAVEPOINT
- **Error Handling**: Transaction iÃ§inde hata yÃ¶netimi
- **Real-world Application**: Bank ATM para transferi senaryosu
- **Data Integrity**: Transaction ile veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼ saÄŸlama

### Lab10 - User-Defined Functions ve XML DetaylarÄ±

#### Procedure 1: User-Defined Functions
```sql
-- Scalar function oluÅŸturma
CREATE FUNCTION dbo.GetEmployeeAge
(
    @BirthDate datetime
)
RETURNS int
AS
BEGIN
    DECLARE @Age int
    SELECT @Age = DATEDIFF(YEAR, @BirthDate, GETDATE())
    RETURN @Age
END

-- Function kullanÄ±mÄ±
SELECT BusinessEntityID, dbo.GetEmployeeAge(BirthDate) AS Age
FROM HumanResources.Employee;

-- Inline table-valued function
CREATE FUNCTION dbo.GetOrderDetails
(@SalesOrderID int)
RETURNS TABLE AS RETURN
(
    SELECT 
        sod.SalesOrderID,
        sod.SalesOrderDetailID,
        p.Name AS ProductName
    FROM Sales.SalesOrderDetail sod
    INNER JOIN Production.Product p ON sod.ProductID = p.ProductID
    WHERE sod.SalesOrderID = @SalesOrderID
)

-- Table-valued function kullanÄ±mÄ±
SELECT * FROM dbo.GetOrderDetails(43659);
```

#### Procedure 2: XML Ä°ÅŸlemleri
```sql
-- FOR XML AUTO
SELECT * FROM Car
FOR XML AUTO;

-- FOR XML PATH
SELECT 
    CarId AS '@id',
    Name AS 'Car/Name',
    Make AS 'Car/Make',
    Price AS 'Car/Price'
FROM Car
FOR XML PATH('Vehicle'), ROOT('Showroom');

-- Nested XML elements
SELECT 
    Make AS '@Make',
    Name AS 'Model',
    Price AS 'Price'
FROM Car
FOR XML PATH('Car'), ROOT('Cars');
```

#### Lab10 Assignment
- **Kapsam**: User-defined functions ve XML konularÄ±nda pratik uygulamalar
- **Procedure 1**: KarmaÅŸÄ±k user-defined function oluÅŸturma ve kullanÄ±mÄ±
- **Procedure 2**: XML iÅŸlemleri ile veri dÃ¶nÃ¼ÅŸtÃ¼rme ve raporlama
- **Dosyalar**:
  - `LAB10.pdf` - Assignment talimatlarÄ± ve gereksinimler
  - `2200005590 - PROCEDURE 1.sql` - Assignment Procedure 1 Ã§Ã¶zÃ¼mÃ¼
  - `2200005590 - PROCEDURE 2.sql` - Assignment Procedure 2 Ã§Ã¶zÃ¼mÃ¼

#### Lab10 KapsamÄ±ndaki Konular
- **User-Defined Functions**: CREATE FUNCTION, ALTER FUNCTION, DROP FUNCTION
- **Scalar Functions**: RETURNS scalar_type, RETURN statement
- **Table-Valued Functions**: RETURNS TABLE, inline table-valued functions
- **Function Parameters**: Input parameters, default parameters
- **Function Execution**: SELECT, EXECUTE keyword
- **XML Processing**: FOR XML AUTO, FOR XML PATH
- **XML Structure**: Elements, attributes, nested elements, root elements
- **Data Transformation**: SQL to XML conversion
- **Assignment**: Pratik uygulamalar ve gerÃ§ek dÃ¼nya senaryolarÄ±

### KullanÄ±lan VeritabanlarÄ±
- **Lab04**: `WideWorldImporters`, `master`
- **Lab05**: `TheFirstDatabase`, `MusicCompanyDB`, `MusicCompanyDB_B`, `MusicCompanyDB_C`, `MusicCompanyDB_D`
- **Lab06**: `AdventureWorks2019`, `Northwind` (Assignment)
- **Lab07**: `AdventureWorks2019`
- **Lab08**: `AdventureWorks2019`
- **Lab09**: `LAB09` (Person ve Accounts tablolarÄ±)
- **Lab10**: `AdventureWorks2019`, `Showroom` (Car tablosu)

## ðŸš€ Kurulum ve Ã‡alÄ±ÅŸtÄ±rma

### Gereksinimler
- SQL Server 2019 veya Ã¼zeri
- SQL Server Management Studio (SSMS)
- WideWorldImporters Ã¶rnek veritabanÄ± (Lab04 iÃ§in)
- AdventureWorks2019 Ã¶rnek veritabanÄ± (Lab06, Lab07, Lab08 ve Lab10 iÃ§in)
- Northwind Ã¶rnek veritabanÄ± (Lab06 Assignment iÃ§in)
- LAB09 veritabanÄ± (Lab09 iÃ§in - script ile oluÅŸturulur)
- Showroom veritabanÄ± (Lab10 iÃ§in - script ile oluÅŸturulur)

### AdÄ±mlar
1. SQL Server'Ä± kurun ve yapÄ±landÄ±rÄ±n
2. Gerekli Ã¶rnek veritabanlarÄ±nÄ± yÃ¼kleyin:
   - WideWorldImporters (Lab04)
   - AdventureWorks2019 (Lab06, Lab07, Lab08, Lab10)
   - Northwind (Lab06 Assignment)
   - LAB09 (Lab09 - script ile otomatik oluÅŸturulur)
   - Showroom (Lab10 - script ile otomatik oluÅŸturulur)
3. SSMS'i aÃ§Ä±n ve sunucuya baÄŸlanÄ±n
4. Ä°lgili `.sql` dosyalarÄ±nÄ± sÄ±rasÄ±yla Ã§alÄ±ÅŸtÄ±rÄ±n

## ðŸ“Š Ã–ÄŸrenme Ã‡Ä±ktÄ±larÄ±

Bu ders sonunda aÅŸaÄŸÄ±daki becerileri kazandÄ±m:

- âœ… **VeritabanÄ± TasarÄ±mÄ±**: ER diyagramlarÄ± oluÅŸturma ve normalizasyon
- âœ… **SQL Programlama**: KarmaÅŸÄ±k sorgular yazma ve optimize etme
- âœ… **GÃ¼venlik YÃ¶netimi**: KullanÄ±cÄ± rolleri ve yetki sistemleri
- âœ… **Stored Procedures**: SaklÄ± yordam geliÅŸtirme
- âœ… **User-Defined Functions**: Scalar ve table-valued fonksiyonlar
- âœ… **Transaction YÃ¶netimi**: ACID Ã¶zellikleri ve veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼
- âœ… **XML Processing**: SQL'den XML'e veri dÃ¶nÃ¼ÅŸtÃ¼rme
- âœ… **VeritabanÄ± YÃ¶netimi**: Backup, restore ve maintenance
- âœ… **Performans Tuning**: Ä°ndeksleme ve sorgu optimizasyonu

## ðŸ” Ã–nemli Notlar

### GÃ¼venlik En Ä°yi UygulamalarÄ±
- GÃ¼Ã§lÃ¼ ÅŸifre politikalarÄ± (`CHECK_POLICY = OFF` sadece test ortamÄ± iÃ§in)
- Minimum yetki prensibi (Principle of Least Privilege)
- DÃ¼zenli yetki gÃ¶zden geÃ§irmeleri
- Temizleme iÅŸlemlerinin Ã¶nemi

### SQL Server Ã–zellikleri
- Sistem katalog gÃ¶rÃ¼nÃ¼mleri (`sys.server_principals`, `sys.database_principals`)
- KoÅŸullu nesne oluÅŸturma (`IF NOT EXISTS`)
- Transaction yÃ¶netimi (`BEGIN TRANSACTION`, `COMMIT`, `ROLLBACK`, `SAVEPOINT`)
- ACID Ã¶zellikleri ile veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼ garantisi
- User-defined functions (`CREATE FUNCTION`, scalar ve table-valued functions)
- XML iÅŸleme (`FOR XML AUTO`, `FOR XML PATH`, XML element ve attribute yapÄ±larÄ±)


## ðŸ“ž Ä°letiÅŸim

- **GitHub**: [OnurAkyuz61](https://github.com/OnurAkyuz61)
- **Repository**: [COM5041-Database](https://github.com/OnurAkyuz61/COM5041-Database)

---

**Not**: Bu repository akademik amaÃ§larla oluÅŸturulmuÅŸtur ve Ä°stanbul KÃ¼ltÃ¼r Ãœniversitesi COM5041 Database Design and Development dersi kapsamÄ±nda yapÄ±lan Ã§alÄ±ÅŸmalarÄ± iÃ§ermektedir.